<!DOCTYPE html>
<html>
<head>

    <!-- Document Settings -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <!-- Base Meta -->
    <!-- dynamically fixing the title for tag/author pages -->



    <title>WiBro Connected Drone</title>
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Styles'n'Scripts -->
    <link rel="stylesheet" type="text/css" href="/assets/built/screen.css" />
    <link rel="stylesheet" type="text/css" href="/assets/built/screen.edited.css" />
    <link rel="stylesheet" type="text/css" href="/assets/built/syntax.css" />
    <!-- highlight.js -->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css">
    <style>.hljs { background: none; }</style>

    <!-- This tag outputs SEO meta+structured data and other important settings -->
    <meta name="description" content="Life of IT Enthusiast" />
    <link rel="shortcut icon" href="/assets/images/tigim.png" type="image/png" />
    <link rel="canonical" href="/wibro-connected-drone" />
    <meta name="referrer" content="no-referrer-when-downgrade" />

     <!--title below is coming from _includes/dynamic_title-->
    <meta property="og:site_name" content="Tigim Insight" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="WiBro Connected Drone" />
    <meta property="og:description" content="Life of IT Enthusiast" />
    <meta property="og:url" content="/wibro-connected-drone" />
    <meta property="og:image" content="/assets/images/main_img.jpg" />
    <meta property="article:publisher" content="https://www.facebook.com/" />
    <meta property="article:tag" content="Technology" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="WiBro Connected Drone" />
    <meta name="twitter:description" content="Life of IT Enthusiast" />
    <meta name="twitter:url" content="/" />
    <meta name="twitter:image" content="/assets/images/main_img.jpg" />
    <meta name="twitter:label1" content="Written by" />
    <meta name="twitter:data1" content="Tigim Insight" />
    <meta name="twitter:label2" content="Filed under" />
    <meta name="twitter:data2" content="Technology" />
    <meta name="twitter:site" content="@" />
    <meta name="twitter:creator" content="@" />
    <meta property="og:image:width" content="2000" />
    <meta property="og:image:height" content="666" />

    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Website",
    "publisher": {
        "@type": "Organization",
        "name": "Tigim Insight",
        "logo": "/assets/images/logo.png"
    },
    "url": "/wibro-connected-drone",
    "image": {
        "@type": "ImageObject",
        "url": "/assets/images/main_img.jpg",
        "width": 2000,
        "height": 666
    },
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "/wibro-connected-drone"
    },
    "description": "Life of IT Enthusiast"
}
    </script>

    <!-- <script type="text/javascript" src="https://demo.ghost.io/public/ghost-sdk.min.js?v=724281a32e"></script>
    <script type="text/javascript">
    ghost.init({
    	clientId: "ghost-frontend",
    	clientSecret: "f84a07a72b17"
    });
    </script> -->

    <meta name="generator" content="Jekyll 3.6.2" />
    <link rel="alternate" type="application/rss+xml" title="WiBro Connected Drone" href="/feed.xml" />


</head>
<body class="post-template">

    <div class="site-wrapper">
        <!-- All the main content gets inserted here, index.hbs, post.hbs, etc -->
        <!-- default -->

<!-- The tag above means: insert everything in this file
into the {body} of the default.hbs template -->

<header class="site-header outer">
    <div class="inner">
        <nav class="site-nav">
    <div class="site-nav-left">
        
            
                <a class="site-nav-logo" href="/"><img src="/assets/images/logo.png" alt="Tigim Insight" /></a>
            
        
        
    </div>
    <div class="site-nav-right">
        <div class="social-links">
            
            
        </div>
        
    </div>
</nav>

    </div>
</header>

<!-- Everything inside the #post tags pulls data from the post -->
<!-- #post -->

<main id="site-main" class="site-main outer" role="main">
    <div class="inner">

        <article class="post-full post tag-technology no-image">

            <header class="post-full-header">
                <section class="post-full-meta">
                    <time class="post-full-meta-date" datetime=" 8 June 2016"> 8 June 2016</time>
                    
                        <span class="date-divider">/</span>
                        
                            
                               <a href='/tag/technology/'>TECHNOLOGY</a>
                            
                        
                    
                </section>
                <h1 class="post-full-title">WiBro Connected Drone</h1>
            </header>

            

            <section class="post-full-content">
                <div class="kg-card-markdown">
                    <p>이것 한다고 했다고 했을때의 모두의 반응은 왜 LTE안쓰고 Wibro로 했냐는 것이다. 다른 이유는 없다. LTE모듈을 내 돈 주고 사기가 너무 싫었고, 집에서 고히 잘 놀고 있는 에그를 활용해서 만들어 보고 싶었다.</p>

<h2 id="부품-소개">부품 소개</h2>

<p>FPV 레이싱 전용의 250 사이즈의 작은 기체를 구입 하였으나, 몇 번 날려보고 느낀 것은 그외에 어떤 활용도 불가능하다는 것을 깨달았다. 결국, 고민 끝에  새로 기체 제작을 하기로 결정했다.</p>

<ul>
  <li>프레임: DJI F450 짭으로 <a href="http://www.aliexpress.com/item/F450-Quadcopter-MultiCopter-Frame-kit-W-Black-Tall-Landing-Gear-Skid-for-DJI-F450-F550-SK480/32339098360.html">알리</a>에서 구입</li>
  <li>Flight Controller: DJI vs. 3DR제품 중에 고민을 하다가 <a href="http://www.aliexpress.com/item/Pixpilot-v2-4-6-Pixhawk-PX4-open-hardware-Autopilot-Flight-Controller-I2C-RGB-PPM-Neo-M8N/32316396160.html">Pixhawk</a>으로 구입</li>
  <li>모터 &amp; ESC: F450에 가장 잘 어울리는 2212 920KV 모터와 30A짜리 SimonK ESC로 <a href="http://www.aliexpress.com/item/6x-2212-920KV-Brushless-Motor-6x-30A-SimonK-ESC-Quad-Multirotor-X525-F450/32427073173.html">알리</a>에서 구입</li>
  <li>프로펠러: 회전하면서 자동으로 locking이 되는 <a href="http://www.aliexpress.com/item/Drone-Replacement-Spare-Parts-4-Pairs-9450-9-4-inch-Self-locking-Enhanced-Propeller-Prop-for/32545653089.html">제품</a>으로 구입. 정말 마음에 든다.</li>
  <li>배터리: 산 것중에 제일 실패한 것. 제작 전에 레이싱용으로 주문한것이라 어쩔수 없었다. 용량이 너무 작아서 5분 남짓 비행 가능하다. <a href="http://www.aliexpress.com/snapshot/7592029447.html?orderId=74719694811378">1500ma/11.1v/40c</a> 다시 구매 한다면, 알리말고 국내나 하비킹에서 구입하고 5200ma로 장만 할 것이다. 여담으로 5개 도착하였는데, 이미 한개가 불량이었고, 한번 날리자 마자 다시 1개 불량. 개발한다고 라즈베리파이에 연결해 두고 커피 마시고 왔더니, 방전되어 2개 사망. 결국 현재는 한개만 남았다. ㅠ.ㅠ</li>
  <li>바나나 컨넥터: 이건 지난 블로그에서도 강조한 것인데 잊지 말고 넉넉하게 구입해야한다.</li>
  <li>기타: 양면 테이프, 찍직이 테이프, <a href="http://www.aliexpress.com/item/10-Pcs-Set-100-New-Strong-RC-Battery-Antiskid-Cable-Tie-Down-Straps-26-2cm-5/32281308568.html">밴드</a>, <a href="http://www.aliexpress.com/item/IMAX-B6-Combo-with-12V-5A-AC-Adaptor-2S-6S-7-4v-22-2V-AC-DC/480064617.html">충전기</a>, <a href="http://www.aliexpress.com/item/New-Arrvial-70-pcs-Flame-Retardant-Durable-7-Color-Assorted-Colors-Ratio-2-1-Polyolefin-Heat/32371460795.html">수축튜브</a>, 육각 드라이버, 인두, 납</li>
</ul>

<p><strong>추가 부품</strong><br />
드론만 날릴 생각이라면 위에 것만 준비하면 된다. 하지만, 난 와이브로 미션 수행과 스트리밍을 할 것이므로 아래 부속품을 더 준비했다.</p>

<ul>
  <li>Wibro 동글: 정말 구려서 이루 말할 수 없이 후지 지만, 다른 것 사기 싫어서 그냥 사용하는 제품  <img src="http://mblogthumb3.phinf.naver.net/20130726_218/likesmirage_137481563691143irw_JPEG/BDBA1.jpg?type=w2" alt="" /></li>
  <li>배터리: 라즈베리파이3을 위한 배터리로 Pixhawk에서 전원을 공급 할 수 있으나, 동작 안정성과 로그 추출, 무게 중심 등의 이율로 유니클로에 받은 휴대용 배터리 사용 <img src="http://nimage.newsway.kr/photo/2015/11/15/2015111515250353476_20151115152553_1.jpg" alt="" /></li>
  <li>라즈베리파이3, 카메라모듈, 케이스: 국내 모 판매점이 있어서 쉽게 구입 가능</li>
</ul>

<h2 id="드론-조립">드론 조립</h2>

<p>인터넷에 정리 잘된 사이트가 있어 해당 내용을 보고 참고 하면 될 듯하다.</p>

<ul>
  <li><a href="http://blog.naver.com/benzydad/220381394276">F450+NAZA/국내사이트</a></li>
  <li><a href="http://www.internetmap.kr/entry/Frame-Assembly-for-For-My-2nd-Quadcopter-using-Pixhawk">F450+Pixhawk/국내사이트</a>로 정리가 깔끔하게 잘 되어 있음</li>
  <li><a href="https://pixhawk.org/platforms/multicopters/dji_flamewheel_450">P4X 공식 홈페이지</a>에서 제공하는 DJI F450 + Pixhawk 조립 방법</li>
</ul>

<p><strong>[추가 부품 붙이기]</strong></p>

<ol>
  <li>라즈베리파이3+카메라+케이스와 배터리, 와이브로 동글을 무게 중심이 잡히도록 찍찍이 테이프와 밴드를 활용하여 고정한다. <img src="https://dl.dropboxusercontent.com/u/18180490/IMG_1233.JPG" alt="" /></li>
  <li>라즈베리파이와 Pixhawk연결이 필요하다. 그림은 이전 버전의 라즈베리파이인데, GPIO핀 배열이 동일하여 동작하는데 상관은 없다. <strong>한 가지 주의할 점</strong>은 따로 배터리를 연결하므로 Power는 연결하지 않는다. <img src="http://ardupilot.org/dev/_images/RaspberryPi_Pixhawk_wiring1.jpg" alt="" /></li>
</ol>

<h2 id="pixhawk-firmware-설치">Pixhawk Firmware 설치</h2>

<p>나는 직접 소스를 빌드해서 업로드 했으나, 보통은 Mission Planner나 APM Planner2를 사용하여 설치하면 된다. <strong>Qground Control</strong>도 사용 가능한데, 설치하는 Firmware 동작(P4X전용 Firmware로 올림)이 살짝 틀려서 처음에는 이용하지 않고, 이후 <strong>센서 튜닝할때 이용</strong>하면 좋을 것이다.</p>

<h3 id="custom-build">Custom Build</h3>

<p>일부러 소스 빌드를 할 분은 많지 않을 것 같지만, 정리해보면 <a href="https://github.com/ArduPilot/ardupilot">깃허브</a>에서 소스코드를 받아서 <a href="http://ardupilot.org/dev/index.html">데브 사이트</a>의 내용을 따라 빌드하면 된다.</p>

<h3 id="gcsground-control-station-이용">GCS(Ground Control Station) 이용</h3>

<p>보통 <a href="https://www.youtube.com/watch?v=ukfBFxXBF1w">동영상</a>을 보고 따라한다. 한글로 된 <a href="http://www.internetmap.kr/entry/Loading-Firmware-Onto-Pixhawk">사이트</a>도 많으니 참고하면 된다.</p>

<h3 id="calibration">Calibration</h3>

<p>Firmware 업로드 후, Sensor, Flight Mode등 기본적인 Calibration이 끝나면 FC 위에 보이는 LED가 파란색(GPS Loking이면, 녹색)으로 되어 있을 것이다. 하지만, 비행 전에 꼭 하나 더 해야 하는 것이 있는데 바로 <strong>“ESC Calibration”</strong>이다. 안하고 처녀 비행을 시도하면, 모터 중 하나가 제대로 돌지 않아 이륙 하자마자 뒤집어지는 경우도 발생한다. <a href="https://www.youtube.com/watch?v=Hl-Q7RPOn18">동영상</a>을 보고 순서대로 따라하거나 공홈에서 설명한 내용대로 하면 된다.</p>

<p>마지막으로 <a href="http://www.internetmap.kr/entry/Basic-Tuning-For-My-2nd-Quadcopter-using-Pixhawk">Auto-trim</a>과 auto-tune을 진행하면 되는데, Pixhawk 기본 셋팅이 워낙 좋아서 하지 않아도 비행에는  무리가 없다.</p>

<h2 id="raspberry-pi3-setting">Raspberry Pi3 Setting</h2>

<h3 id="raspbian-설치">Raspbian 설치</h3>

<p><strong>Download :</strong> <a href="https://www.raspberrypi.org/downloads/raspbian/">official site</a>에서 받아서 unzip</p>

<p><strong>SD card format :</strong> SD Format 프로그램으로 포맷을 한다.</p>

<p><strong>Flashing image :</strong> 아래 방법으로 Flashing</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>diskutil list  &lt;= disk name of your sd card formatted  
diskutil unmountDisk /dev/disk2 &lt;= unmount
sudo dd bs=1m if=2016-05-10-raspbian-jessie.img of=/dev/rdisk2 &lt;= flashing the image downloaded  
</code></pre></div></div>

<p><strong>WiFi 셋팅 :</strong> GUI에서 오른쪽 윗 부분의 WiFi Icon을 클릭하여 하는 방법도 있고, 아래와 같이 명령어로도 가능하다. 마지막에  <strong>”}”</strong> 빼먹지 말자. 30분 삽질한 아련한 추억이… ㅠ.ㅠ</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo nano /etc/wpa_supplicant/wpa_supplicant.conf

# 파일에 아래 내용 추가   
network = {
	ssid="Your SSID"
	psk="Your Password"
}
</code></pre></div></div>

<p><strong>한국어 지원 :</strong> <a href="http://blog.naver.com/6533574/220709666224">사이트</a> 참고해서 적용</p>

<h3 id="pi-camera">Pi Camera</h3>

<p><strong>구입하기 :</strong> <a href="http://www.aliexpress.com/item/New-Camera-Module-Board-5MP-160-Degree-Wide-Angle-Fish-Eye-Lenses-For-Raspberry-Pi/32375046422.html?spm=2114.30010308.3.174.Bd88UV&amp;ws_ab_test=searchweb201556_0,searchweb201602_3_10017_10021_507_10022_10020_10009_10008_10018_10019_101,searchweb201603_2&amp;btsid=0cd8b287-433e-42f9-bbef-bce917d18a6c">$21.24</a>로 알리에서 구입 가능하다. 2주만 참을 수 있다면… ㅎㅎ</p>

<p><strong>연결 및 셋팅 :</strong> 이 글 보는 분이라면 케이블 연결은 무리 없이 할 수 있다고 가정하고 아래 내용으로 세팅하면 된다.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo raspi-config  
-&gt; Choose "6 Enable Camear"  
-&gt; Select "Enable"
-&gt; Then, reboot  
</code></pre></div></div>

<p><strong>테스트 :</strong> 라즈비안에서 제공하는 명령어로 확인 가능</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>raspistill -o filename.jpg
raspistill -vf -hf -o filename.jpg -&gt; when your cam is placed upside down
raspivid -o video.h264
</code></pre></div></div>

<h3 id="gstreamer">GStreamer</h3>

<p>Gstreamer를 이용해서 스트리밍을 할 예정이므로 설치가 필요하다. 아래 명령어로 안되면 <a href="http://blog.gbaman.info/?p=150">다음 사이트</a>나 구글링해보자. ㅎㅎ</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt-get install gstreamer1.0  
</code></pre></div></div>

<p><strong>OSX :</strong> 랩탑에도 필요하기 때문에 설치하도록 하자.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>brew install gstreamer gst-libav gst-plugins-ugly gst-plugins-base gst-plugins-bad gst-plugins-good  
</code></pre></div></div>

<h3 id="라즈베리파이3와-pixhawk연동">라즈베리파이3와 Pixhawk연동</h3>

<p><a href="http://ardupilot.org/dev/docs/raspberry-pi-via-mavlink.html">ardupilot site</a> 에 설명이 잘되어 있다. 하지만, 이전 버전의 RPI로 썼기 때문에 라즈베리파이3와 연결하기 위해 몇 가지 변경사항이 있다. 먼저 공식 사이트 부터 살펴보고, 틀린 부분만 적용하면 될 것이다.</p>

<p><strong>패키지 설치 :</strong> Mavproxy.py를 주로 사용할 것이므로 관련 Python 라이브러리 설치가 필요하다.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt-get update
sudo apt-get install python-matplotlib python-serial python-wxgtk2.8 python-lxml
sudo apt-get install python-scipy python-opencv ccache gawk git python-pip python-pexpect  
sudo apt-get install screen python-dev libxml2-dev libxslt-dev

sudo pip install pymavlink
sudo pip install mavproxy  
</code></pre></div></div>

<p><strong>시리얼 포트 enable :</strong> 공식 사이트에는 Disable하라고 되어 있는 RPI3에서는 Enable해야 동작한다. “raspi-config”의 advanced 항목에서 하면 된다.</p>

<p><strong>/dev/ttyS0</strong>이 시리얼 포트 이름이다. 하지만, mavproxy.py가 자동적으로 찾아주기 때문에 따로 하지 입력하지 않아도 된다.</p>

<p><strong>연결 확인 :</strong> 모든 것이 제대로 되었다면 간단히 아래 명령으로 픽스호크와 통신 상태를 확인 할 수 있다.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo mavproxy.py
# 정상적이라면 여러 데이터들이 출력 되며, 모드 변경이 가능하다. 
mode poshold &lt;= poshold로 flight mode 변경 
</code></pre></div></div>

<p>모든 준비는 끝났고, 간단한 파이손 프로그래밍으로 Wibro 드론을 날릴 수 있다. :)</p>

<h2 id="동작-다이어그램">동작 다이어그램</h2>

<p>전체 동작은 아래 다이어그램과 같이 된다. 그림에는 설명을 빠트렸는데, 비행체(드론)에 있는 Pixhawk와 RPI3은 <strong>시리얼 포트</strong>로, RPI3와 와이브로 동글은 <strong>WiFi</strong> 연결되어 있다.</p>

<p><img src="https://dl.dropboxusercontent.com/u/18180490/wibro-connected-drone.png" alt="" /></p>

<p>얼핏 보면 왜 이렇게 복잡하게 하였을까 생각이 든다. 나도 이 별 것 아닌 것을 위해 이렇게 복잡하게 하기는 싫었다. 하지만, RPI3와 와이브로 동글이 WiFi로 연결되면서 NAT에 문제 해결 방법이 마땅치 않은 것이다. 거기에 자주 바뀌는 IP를 처리하기 위해 부득히 하게 Relay 서버를 두었다.</p>

<h3 id="hole-punching">Hole Punching</h3>

<p>UDP통신에서 NAT 문제 해결을 위해 사용할 수 있는 방법이다. <a href="https://github.com/supertigim/hole_punch">간단한 파이선 소스코드</a>를 찾아서 테스트 해보니, 재미있게도 와이브로 동글에서는 동작이 되었으나, 아이폰으로 한 LTE연결은 동작이 되지 않는 것이다. 결국 포기~ ㅎㅎ</p>

<h3 id="relay-server">Relay Server</h3>

<p>UDP-UDP, TCP-TCP간의 Relay는 간단하고 구현한 소스 코드가 있어 적용하기 쉬우리라 생각했는데, 불행하게도 GCS와 Relay 서버 간의 UDP통신이 안되는 문제가 발생했다. GCS는 한번이라도 데이터를 받은 후에야 회신을 하고, Relay서버는 한번이라도 데이터가 들어와야 Client를 인식하게 되어 있으니 서로 눈 뜬 장님 처럼 가만히 있는다. 결국, Relay 서버와 GCS 사이는 TCP로 구현을 했다. <a href="https://github.com/supertigim/hole_punch/blob/master/relayd-tcp-udp.py">소스코드</a>는 다음과 같다.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>from socket import *
from select import select

DEFAULT_PORT    = 4653
MAVLINK_LENGTH  = 263

def run():
   		host = ''
   		backlog = 5
	sock_GCS = None
	addr_udp = None

	# create tcp socket
	tcp = socket(AF_INET, SOCK_STREAM)
	tcp.bind(('',DEFAULT_PORT))
	tcp.listen(backlog)

	# create udp socket
	udp = socket(AF_INET, SOCK_DGRAM)
	udp.bind(('',DEFAULT_PORT))

	input = [tcp,udp]

	while True:
		inputready,outputready,exceptready = select(input,[],[])
		
	for s in inputready:
		if s == tcp:
			sock_GCS, addr = s.accept()
			input.append(sock_GCS)
		elif s == udp:
			data, addr_udp = s.recvfrom(MAVLINK_LENGTH)
            if sock_GCS is not None and data is not None:
                sock_GCS.send(data)
			else:
            data = sock_GCS.recv(MAVLINK_LENGTH)
            if addr_udp is not None and data is not None:
            	udp.sendto( data, addr_udp )
            
if __name__ == '__main__':
	run()  
</code></pre></div></div>

<p>코드는 개판이다. Python은 며칠 본거라 에러 처리라고는 눈꼽만치도 없다. 동작만 확인하면 될 것이다.</p>

<h3 id="streaming">Streaming</h3>

<p>흐흐… 하하…<br />
Streaming은 Relay서버를 거치면서 패킷이 새는지 반나절의 시도에서 실패하고 결국 RPI3와 MAC을 직접 연결 시켰다. 불행 중 다행으로 Wibro에 DMZ기능이 있어서 포트 포워딩이 되더라… 릴레이 서버 왜 만들었누…. ㅠ.ㅠ</p>

<h3 id="동작-시나리오">동작 시나리오</h3>

<p>총 5개의 터미널 열어서 한다. 릴레이 서버 없으면 한 개 줄고… -_-;;</p>

<p>우선, 맥에서 터미널 실행, ssh로 릴레이 서버 구동한다.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python relayd-tcp-upd.py
</code></pre></div></div>

<p>터미널 두개를 더 실행하여 RPI3에 접속한 후,</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># 1번째 터미널에서 
sudo mavproxy.py --out relay_server_ip:4653

# 2번째 터미널에서  
sudo aspivid -t 0 -h 300 -w 400 -fps 15 -hf -vf -b 2000000 -o -| gst-launch-1.0 -v fdsrc ! h264parse ! rtph264pay config-interval=1 pt=96 ! gdppay ! tcpserversink host=RPI3_IP port=4653
</code></pre></div></div>

<p>4번째 터미널은 스트리밍을 받기 위해,</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gst-launch-1.0 -v tcpclientsrc host=125.152.240.156 port=4653 ! gdpdepay ! rtph264depay ! avdec_h264 ! videoconvert ! osxvideosink sync=false
</code></pre></div></div>

<p>마지막으로 APM Planner2를 실행한 후, communication에서 tcp로 relay서버를 연결하면, 모든 셋팅 클리어~~~ auto mission으로 실행 시켜보고, 날아가는 화면을 Wibro를 통해서 (정확히는 WiFi+Wibro+LTE를 통해) 스트리밍으로 감상할 수 있다.</p>

<h2 id="마무리">마무리</h2>

<p>삽질 삽질 이런 삽질이 없다 싶은데도 정리가 필요하여 작성했다. 필요한 작업은 python으로 된 코드를 c++로 변경하고, unity3d나 unreal로 간단한 gcs를 꾸며 보는 것이다. 그 이후는 멀티 드론 작업을 해볼 생각이다. 드론이 한 3대 정도 있었으면…. -_ㅠ….</p>

<h2 id="기타-팁">기타 팁</h2>

<ul>
  <li>라즈베리파이와 픽스호크를 연결하면, 초기에 Garbage값이 계속 올라온다. 짭퉁이라 생기는 것인지 원래 그런 것인지 모르겠는데, 1분 정도 두면 괜찮아진다. 이유는 아직까지 잘 모르겠다.</li>
</ul>


                </div>
            </section>

            <!-- Email subscribe form at the bottom of the page -->
            

            <footer class="post-full-footer">
                <!-- Everything inside the #author tags pulls data from the author -->
                <!-- #author-->
                
                    
                        <section class="author-card">
                            
                                <img class="author-profile-image" src="/assets/images/logo.png" alt="tigim" />
                            
                            <section class="author-card-content">
                                <h4 class="author-card-name"><a href="/author/tigim">Jong Yoon Kim</a></h4>
                                
                                    <p>Software Engineer / Technical Project Manager / Technology Strategist / MBA</p>
                                
                            </section>
                        </section>
                        <div class="post-full-footer-right">
                            <a class="author-card-button" href="/author/tigim">Read More</a>
                        </div>
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                <!-- /author  -->
            </footer>

            <!-- If you use Disqus comments, just uncomment this block.
            The only thing you need to change is "test-apkdzgmqhj" - which
            should be replaced with your own Disqus site-id. -->
            
                <section class="post-full-comments">
                    <div id="disqus_thread"></div>
                    <script>
                        var disqus_config = function () {
                            this.page.url = '/';
                            this.page.identifier = 'Tigim Insight';
                        };
                        (function() {
                            var d = document, s = d.createElement('script');
                            s.src = 'https://tigiminsightcom.disqus.com/embed.js';
                            s.setAttribute('data-timestamp', +new Date());
                            (d.head || d.body).appendChild(s);
                        })();
                    </script>
                </section>
            

        </article>

    </div>
</main>

<!-- Links to Previous/Next posts -->
<aside class="read-next outer">
    <div class="inner">
        <div class="read-next-feed">
            
                
                
                
                
                    <article class="read-next-card"
                        
                            style="background-image: url(/assets/images/main_img.jpg)"
                        
                    >
                        <header class="read-next-card-header">
                            <small class="read-next-card-header-sitetitle">&mdash; Tigim Insight &mdash;</small>
                            
                                <h3 class="read-next-card-header-title"><a href="/tag/technology/">Technology</a></h3>
                            
                        </header>
                        <div class="read-next-divider"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 14.5s2 3 5 3 5.5-2.463 5.5-5.5S21 6.5 18 6.5c-5 0-7 11-12 11C2.962 17.5.5 15.037.5 12S3 6.5 6 6.5s4.5 3.5 4.5 3.5"/></svg>
</div>
                        <div class="read-next-card-content">
                            <ul>
                                
                                
                                  
                                
                                  
                                    
                                        
                                        
                                            <li><a href="/webrtc_and_reactjs">WebRTC와 ReactJS</a></li>
                                        
                                    
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                            <li><a href="/elevator_buttons_recognition">엘레베이터 버튼 인식</a></li>
                                        
                                    
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                            <li><a href="/kafka_setup_examples">분산 메시지 브로커 Kafka 설치 및 간단한 예제</a></li>
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                
                            </ul>
                        </div>
                        <footer class="read-next-card-footer">
                            <a href="/tag/technology/">
                                
                                    See all 49 posts  →
                                
                            </a>
                        </footer>
                    </article>
                
            

            <!-- If there's a next post, display it using the same markup included from - partials/post-card.hbs -->
            
                
    <article class="post-card post-template no-image">
        
        <div class="post-card-content">
            <a class="post-card-content-link" href="/how-to-use-dronekit">
                <header class="post-card-header">
                    
                        
                            
                                <span class="post-card-tags">Technology</span>
                            
                        
                    

                    <h2 class="post-card-title">Pixhawk based Drone Development</h2>
                </header>
                <section class="post-card-excerpt">
                    <p>드론은 날려 보았으니 이것 저것 다른 것이 해보고 싶었다. 최종으로는 드론 군집 비행 같은 것을 좀 해보려고 하는데, 관련해서 스터디 한 내용을 정리해 보았다. 그런데, 군집 비행 하려면 몇 대가 필요할까... -_-;;; ##</p>
                </section>
            </a>
            <footer class="post-card-meta">
                
                    
                        
                        <img class="author-profile-image" src="/assets/images/logo.png" alt="Jong Yoon Kim" />
                        
                        <span class="post-card-author">
                            <a href="/author/tigim/">Jong Yoon Kim</a>
                        </span>
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            </footer>
        </div>
    </article>

            

            <!-- If there's a previous post, display it using the same markup included from - partials/post-card.hbs -->
            
                
    <article class="post-card post-template no-image">
        
        <div class="post-card-content">
            <a class="post-card-content-link" href="/raspberrypi-installation-for-development">
                <header class="post-card-header">
                    
                        
                            
                                <span class="post-card-tags">Technology</span>
                            
                        
                    

                    <h2 class="post-card-title">라즈베리파이에 개발 환경 설치</h2>
                </header>
                <section class="post-card-excerpt">
                    <p>라즈비안 설치 드론에 붙이는 용도여서 lite버전을 설치하였으나, GUI의 불편함을 이기지 못하고, 결국 재설치 했다. 한김에 차근 차근 정리 해보자. NOOBS Jessie 설치 초보자용이라고 당당히 나와 있다. 공식 홈페이지에서 동영상까지 만들어 잘 설명했다. 따라하면</p>
                </section>
            </a>
            <footer class="post-card-meta">
                
                    
                        
                        <img class="author-profile-image" src="/assets/images/logo.png" alt="Jong Yoon Kim" />
                        
                        <span class="post-card-author">
                            <a href="/author/tigim/">Jong Yoon Kim</a>
                        </span>
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            </footer>
        </div>
    </article>

            

        </div>
    </div>
</aside>

<!-- Floating header which appears on-scroll, included from includes/floating-header.hbs -->
<div class="floating-header">
    <div class="floating-header-logo">
        <a href="/">
            
                <img src="/assets/images/logo.png" alt="Tigim Insight icon" />
            
            <span>Tigim Insight</span>
        </a>
    </div>
    <span class="floating-header-divider">&mdash;</span>
    <div class="floating-header-title">WiBro Connected Drone</div>
    <div class="floating-header-share">
        <div class="floating-header-share-label">Share this <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
    <path d="M7.5 15.5V4a1.5 1.5 0 1 1 3 0v4.5h2a1 1 0 0 1 1 1h2a1 1 0 0 1 1 1H18a1.5 1.5 0 0 1 1.5 1.5v3.099c0 .929-.13 1.854-.385 2.748L17.5 23.5h-9c-1.5-2-5.417-8.673-5.417-8.673a1.2 1.2 0 0 1 1.76-1.605L7.5 15.5zm6-6v2m-3-3.5v3.5m6-1v2"/>
</svg>
</div>
        <a class="floating-header-share-tw" href="https://twitter.com/share?text=WiBro+Connected+Drone&amp;url=https://supertigim.github.io/wibro-connected-drone"
            onclick="window.open(this.href, 'share-twitter', 'width=550,height=235');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg>

        </a>
        <a class="floating-header-share-fb" href="https://www.facebook.com/sharer/sharer.php?u=https://supertigim.github.io/wibro-connected-drone"
            onclick="window.open(this.href, 'share-facebook','width=580,height=296');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M19 6h5V0h-5c-3.86 0-7 3.14-7 7v3H8v6h4v16h6V16h5l1-6h-6V7c0-.542.458-1 1-1z"/></svg>

        </a>
    </div>
    <progress class="progress" value="0">
        <div class="progress-container">
            <span class="progress-bar"></span>
        </div>
    </progress>
</div>


<!-- /post -->

<!-- The #contentFor helper here will send everything inside it up to the matching #block helper found in default.hbs -->


        <!-- Previous/next page links - displayed on every page -->
        

        <!-- The footer at the very bottom of the screen -->
        <footer class="site-footer outer">
            <div class="site-footer-content inner">
                <section class="copyright"><a href="https://ghost.org" target="_blank" rel="noopener">Ghost</a> &copy; 2021</section>
                <section class="poweredby">Proudly published with <a href="https://jekyllrb.com/">Jekyll</a> &
                    <a href="https://pages.github.com/" target="_blank" rel="noopener">GitHub Pages</a> using
                    <a href="https://github.com/jekyller/jasper2" target="_blank" rel="noopener">Jasper2</a></section>
                <nav class="site-footer-nav">
                    <a href="/">Latest Posts</a>
                    
                    
                    <a href="/">Tigim Insight</a>
                </nav>
            </div>
        </footer>

    </div>

    <!-- The big email subscribe modal content -->
    

    <!-- highlight.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.10.0/components/prism-abap.min.js"></script>
    <script>$(document).ready(function() {
      $('pre code').each(function(i, block) {
        hljs.highlightBlock(block);
      });
    });</script>

    <!-- jQuery + Fitvids, which makes all video embeds responsive -->
    <script
        src="https://code.jquery.com/jquery-3.2.1.min.js"
        integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
        crossorigin="anonymous">
    </script>
    <script type="text/javascript" src="/assets/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="https://demo.ghost.io/assets/js/jquery.fitvids.js?v=724281a32e"></script>


    <!-- Paginator increased to "infinit" in _config.yml -->
    <!-- if paginator.posts  -->
    <!-- <script>
        var maxPages = parseInt('');
    </script>
    <script src="/assets/js/infinitescroll.js"></script> -->
    <!-- /endif -->

    


    <!-- Add Google Analytics  -->
    <!-- Google Analytics Tracking code -->
 <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-62625802-1', 'auto');
  ga('send', 'pageview');

 </script>


    <!-- The #block helper will pull in data from the #contentFor other template files. In this case, there's some JavaScript which we only want to use in post.hbs, but it needs to be included down here, after jQuery has already loaded. -->
    
        <script>

// NOTE: Scroll performance is poor in Safari
// - this appears to be due to the events firing much more slowly in Safari.
//   Dropping the scroll event and using only a raf loop results in smoother
//   scrolling but continuous processing even when not scrolling
$(document).ready(function () {
    // Start fitVids
    var $postContent = $(".post-full-content");
    $postContent.fitVids();
    // End fitVids

    var progressBar = document.querySelector('progress');
    var header = document.querySelector('.floating-header');
    var title = document.querySelector('.post-full-title');

    var lastScrollY = window.scrollY;
    var lastWindowHeight = window.innerHeight;
    var lastDocumentHeight = $(document).height();
    var ticking = false;

    function onScroll() {
        lastScrollY = window.scrollY;
        requestTick();
    }

    function onResize() {
        lastWindowHeight = window.innerHeight;
        lastDocumentHeight = $(document).height();
        requestTick();
    }

    function requestTick() {
        if (!ticking) {
            requestAnimationFrame(update);
        }
        ticking = true;
    }

    function update() {
        var trigger = title.getBoundingClientRect().top + window.scrollY;
        var triggerOffset = title.offsetHeight + 35;
        var progressMax = lastDocumentHeight - lastWindowHeight;

        // show/hide floating header
        if (lastScrollY >= trigger + triggerOffset) {
            header.classList.add('floating-active');
        } else {
            header.classList.remove('floating-active');
        }

        progressBar.setAttribute('max', progressMax);
        progressBar.setAttribute('value', lastScrollY);

        ticking = false;
    }

    window.addEventListener('scroll', onScroll, {passive: true});
    window.addEventListener('resize', onResize, false);

    update();
});
</script>

    

    <!-- Ghost outputs important scripts and data with this tag - it should always be the very last thing before the closing body tag -->
    <!-- ghost_foot -->

</body>
</html>
